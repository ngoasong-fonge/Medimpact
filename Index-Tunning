SELECT
  schemaname,
  relname,
  seq_scan - idx_scan AS too_much_seq,
  CASE
    WHEN
      seq_scan - coalesce(idx_scan, 0) > 0
    THEN
      'Missing Index?'
    ELSE
      'OK'
  END,
  pg_relation_size(relname::regclass) AS rel_size, seq_scan, idx_scan
FROM
  pg_stat_all_tables
WHERE
  pg_relation_size(relname::regclass) > 80000
ORDER BY
  too_much_seq DESC, schemaname, relname;

citus=# drop role "deployadmin";
ERROR:  role "deployadmin" does not exist
CONTEXT:  while executing command on 10.13.3.51:5432


citus=# SELECT 'ALTER TABLE ngmep.' || c.oid::pg_catalog.regclass || ' SET (autovacuum_enabled = false);'
citus-# FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i
citus-# WHERE c.oid = i.inhrelid
citus-#   AND i.inhparent = (SELECT oid FROM pg_class WHERE relname = 'encounter_version')
citus-# ORDER BY pg_catalog.pg_get_expr(c.relpartbound, c.oid) = 'DEFAULT', c.oid::pg_catalog.regclass::pg_catalog.text;
ERROR:  more than one row returned by a subquery used as an expression



