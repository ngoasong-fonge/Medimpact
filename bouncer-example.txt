[databases]
db1 = host=1.1.1.1 port=5432 dbname=db1 user=db1_user
db2 = host=1.1.1.1 port=5432 dbname=db2 user=db2_user

[pgbouncer]
listen_addr = 1.1.1.1
listen_port = 3333
auth_type = md5
auth_file = /etc/pgbouncer/userlist.txt
admin_users = admin_user
pool_mode = transaction
max_client_conn = 1000
default_pool_size = 20
logfile = /var/log/pgbouncer/pgbouncer.log
pidfile = /var/log/pgbouncer/pgbouncer.pid
unix_socket_dir = /tmp
ignore_startup_parameters = extra_float_digits




-------------------------------------------------------------------


To install PostgreSQL and set it up to run as a different user, such as svcpostgres, you need to follow these steps:

Create the new user:
First, create the new user if it doesn't already exist.

sh
Copy code
sudo useradd -m svcpostgres
Install PostgreSQL:
Install PostgreSQL as usual using the package manager. Hereâ€™s an example for a Red Hat-based system using dnf.

sh
Copy code
sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm
sudo dnf install -y postgresql15-server
Initialize the PostgreSQL Database Cluster:
Initialize the database cluster and specify the data directory. Ensure the directory is owned by svcpostgres.

sh
Copy code
sudo mkdir -p /var/lib/pgsql/15/data
sudo chown -R svcpostgres:svcpostgres /var/lib/pgsql/15/data
sudo -u svcpostgres /usr/pgsql-15/bin/initdb -D /var/lib/pgsql/15/data
Modify the PostgreSQL Service Configuration:
Edit the systemd service file to specify that PostgreSQL should run as svcpostgres.

sh
Copy code
sudo nano /usr/lib/systemd/system/postgresql-15.service
Change the User and Group directives to svcpostgres:

ini
Copy code
[Service]
User=svcpostgres
Group=svcpostgres
Reload systemd Configuration:
Reload the systemd configuration to apply the changes.

sh
Copy code
sudo systemctl daemon-reload
Start and Enable the PostgreSQL Service:
Start the PostgreSQL service and enable it to start on boot.

sh
Copy code
sudo systemctl start postgresql-15
sudo systemctl enable postgresql-15
Summary of Steps
Create the new user:

sh
Copy code
sudo useradd -m svcpostgres
Install PostgreSQL:

sh
Copy code
sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm
sudo dnf install -y postgresql15-server
Initialize the database cluster:

sh
Copy code
sudo mkdir -p /var/lib/pgsql/15/data
sudo chown -R svcpostgres:svcpostgres /var/lib/pgsql/15/data
sudo -u svcpostgres /usr/pgsql-15/bin/initdb -D /var/lib/pgsql/15/data
Modify the PostgreSQL service file:

sh
Copy code
sudo nano /usr/lib/systemd/system/postgresql-15.service
Change User and Group to svcpostgres:

ini
Copy code
[Service]
User=svcpostgres
Group=svcpostgres
Reload systemd configuration:

sh
Copy code
sudo systemctl daemon-reload
Start and enable the PostgreSQL service:

sh
Copy code
sudo systemctl start postgresql-15
sudo systemctl enable postgresql-15
By following these steps, you can configure PostgreSQL to run as a different user, such as svcpostgres. This approach ensures that PostgreSQL operates under the specified user, which can be useful for managing permissions and enhancing security.






