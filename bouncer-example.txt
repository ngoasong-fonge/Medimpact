[databases]
db1 = host=1.1.1.1 port=5432 dbname=db1 user=db1_user
db2 = host=1.1.1.1 port=5432 dbname=db2 user=db2_user

[pgbouncer]
listen_addr = 1.1.1.1
listen_port = 3333
auth_type = md5
auth_file = /etc/pgbouncer/userlist.txt
admin_users = admin_user
pool_mode = transaction
max_client_conn = 1000
default_pool_size = 20
logfile = /var/log/pgbouncer/pgbouncer.log
pidfile = /var/log/pgbouncer/pgbouncer.pid
unix_socket_dir = /tmp
ignore_startup_parameters = extra_float_digits


====================================


2024-08-28 19:14:13.683 UTC [127.0.0.1(46450)] [2672340]: [1723-1] user=pmm,db=citus,host=127.0.0.1LOG:  AUDIT: SESSION,1723,1,READ,SELECT,,,"SELECT name, default_version, installed_version FROM pg_available_extensions",<not logged>
2024-08-28 19:14:13.684 UTC [127.0.0.1(46466)] [2672342]: [5170-1] user=pmm,db=citus,host=127.0.0.1LOG:  AUDIT: SESSION,5170,1,READ,SELECT,,,"
                                SELECT *,
                                        (case pg_is_in_recovery() when 't' then null else pg_current_wal_lsn() end) AS pg_current_wal_lsn,
                                        (case pg_is_in_recovery() when 't' then null else pg_wal_lsn_diff(pg_current_wal_lsn(), pg_lsn('0/0'))::float end) AS pg_current_wal_lsn_bytes,
                                        (case pg_is_in_recovery() when 't' then null else pg_wal_lsn_diff(pg_current_wal_lsn(), replay_lsn)::float end) AS pg_wal_lsn_diff
                                FROM pg_stat_replication
                                ",<not logged>
2024-08-28 19:14:13.684 UTC [127.0.0.1(46450)] [2672340]: [1724-1] user=pmm,db=citus,host=127.0.0.1LOG:  AUDIT: SESSION,1724,1,READ,SELECT,,,"SELECT extname, extrelocatable, extversion FROM pg_extension",<not logged>
2024-08-28 19:14:13.684 UTC [127.0.0.1(46466)] [2672342]: [5171-1] user=pmm,db=citus,host=127.0.0.1LOG:  AUDIT: SESSION,5171,1,READ,SELECT,,,SELECT * FROM pg_stat_bgwriter;,<not logged>
2024-08-28 19:14:13.685 UTC [127.0.0.1(46466)] [2672342]: [5172-1] user=pmm,db=citus,host=127.0.0.1LOG:  AUDIT: SESSION,5172,1,READ,SELECT,,,SELECT * FROM pg_stat_database;,<not logged>
2024-08-28 19:14:13.860 UTC [10.13.3.56(46746)] [2678931]: [241-1] user=xrayappuser,db=citus,host=10.13.3.56LOG:  AUDIT: SESSION,241,1,READ,SELECT,,,"select id, node_id, ms_type, last_heartbeat, start_time, version from high_availability where node_id = $1 and ms_type = $2",<not logged>
2024-08-28 19:14:13.883 UTC [10.13.3.56(46746)] [2678931]: [242-1] user=xrayappuser,db=citus,host=10.13.3.56LOG:  AUDIT: SESSION,242,1,WRITE,UPDATE,,,UPDATE high_availability SET last_heartbeat = $1 WHERE node_id = $2 and ms_type = $3,<not logged>
2024-08-28 19:14:14.231 UTC [10.13.3.78(47186)] [2679245]: [64-1] user=postgres,db=citus,host=10.13.3.78LOG:  AUDIT: SESSION,64,1,READ,SELECT,,,"SELECT waiting_pid, waiting_node_id, waiting_transaction_num, waiting_transaction_stamp, blocking_pid, blocking_node_id, blocking_transaction_num, blocking_transaction_stamp, blocking_transaction_waiting FROM dump_local_wait_edges()",<not logged>
2024-08-28 19:14:14.320 UTC [10.13.3.79(41628)] [2679250]: [67-1] user=postgres,db=citus,host=10.13.3.79LOG:  AUDIT: SESSION,67,1,READ,SELECT,,,"SELECT waiting_pid, waiting_node_id, waiting_transaction_num, waiting_transaction_stamp, blocking_pid, blocking_node_id, blocking_transaction_num, blocking_transaction_stamp, blocking_transaction_waiting FROM dump_local_wait_edges()",<not logged>
2024-08-28 19:14:14.553 UTC [10.13.3.56(36380)] [2677539]: [1218-1] user=xrayappuser,db=citus,host=10.13.3.56LOG:  AUDIT: SESSION,1218,1,READ,SELECT,,,"select id, node_id, ms_type, last_heartbeat, start_time, version from high_availability where node_id = $1 and ms_type = $2",<not logged>
2024-08-28 19:14:14.576 UTC [10.13.3.56(36380)] [2677539]: [1219-1] user=xrayappuser,db=citus,host=10.13.3.56LOG:  AUDIT: SESSION,1219,1,WRITE,UPDATE,,,UPDATE high_availability SET last_heartbeat = $1 WHERE node_id = $2 and ms_type = $3,<not logged>
2024-08-28 19:14:14.633 UTC [10.13.3.73(40848)] [2679246]: [64-1] user=postgres,db=citus,host=10.13.3.73LOG:  AUDIT: SESSION,64,1,READ,SELECT,,,"SELECT waiting_pid, waiting_node_id, waiting_transaction_num, waiting_transaction_stamp, blocking_pid, blocking_node_id, blocking_transaction_num, blocking_transaction_stamp, blocking_transaction_waiting FROM dump_local_wait_edges()",<not logged>
2024-08-28 19:14:14.753 UTC [127.0.0.1(46430)] [2672333]: [1863-1] user=postgres,db=postgres,host=127.0.0.1LOG:  AUDIT: SESSION,1863,1,READ,SELECT,,,"SELECT pg_catalog.pg_postmaster_start_time(), CASE WHEN pg_catalog.pg_is_in_recovery() THEN 0 ELSE ('x' || pg_catalog.substr(pg_catalog.pg_walfile_name(pg_catalog.pg_current_wal_lsn()), 1, 8))::bit(32)::int END, CASE WHEN pg_catalog.pg_is_in_recovery() THEN 0 ELSE pg_catalog.pg_wal_lsn_diff(pg_catalog.pg_current_wal_lsn(), '0/0')::bigint END, pg_catalog.pg_wal_lsn_diff(pg_catalog.pg_last_wal_replay_lsn(), '0/0')::bigint, pg_catalog.pg_wal_lsn_diff(COALESCE(pg_catalog.pg_last_wal_receive_lsn(), '0/0'), '0/0')::bigint, pg_catalog.pg_is_in_recovery() AND pg_catalog.pg_is_wal_replay_paused(), pg_catalog.pg_last_xact_replay_timestamp(), pg_catalog.array_to_json(pg_catalog.array_agg(pg_catalog.row_to_json(ri))) FROM (SELECT (SELECT rolname FROM pg_catalog.pg_authid WHERE oid = usesysid) AS usename, application_name, client_addr, w.state, sync_state, sync_priority FROM pg_catalog.pg_stat_get_wal_senders() w, pg_catalog.pg_stat_get_activity(pid)) AS ri",<not logged>



