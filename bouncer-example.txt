[databases]
db1 = host=1.1.1.1 port=5432 dbname=db1 user=db1_user
db2 = host=1.1.1.1 port=5432 dbname=db2 user=db2_user

[pgbouncer]
listen_addr = 1.1.1.1
listen_port = 3333
auth_type = md5
auth_file = /etc/pgbouncer/userlist.txt
admin_users = admin_user
pool_mode = transaction
max_client_conn = 1000
default_pool_size = 20
logfile = /var/log/pgbouncer/pgbouncer.log
pidfile = /var/log/pgbouncer/pgbouncer.pid
unix_socket_dir = /tmp
ignore_startup_parameters = extra_float_digits


====================================
WITH SchemaSize AS (
  SELECT 
    ps.nspname AS schema_name,
    SUM(pg_total_relation_size(pc.oid)) AS total_size
  FROM 
    pg_class pc
  JOIN 
    pg_catalog.pg_namespace ps ON ps.oid = pc.relnamespace
  GROUP BY 
    ps.nspname
)
SELECT 
  ss.schema_name,
  pg_size_pretty(ss.total_size) AS total_size_pretty
FROM 
  SchemaSize ss
ORDER BY 
  ss.total_size DESC
LIMIT 10;


======================


[svcpostgres@dv1medpgsc1 sql]$ psql -h dv1medpgs -U postgres -f /opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql citus
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:11: WARNING:  "function pg_temp_61.role_exists(text)" has dependency on unsupported object "schema pg_temp_61"
DETAIL:  "function pg_temp_61.role_exists(text)" will be created only locally
CREATE FUNCTION
DO
CREATE SCHEMA
SET
GRANT
CREATE TABLE
 create_reference_table
------------------------

(1 row)

psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:57: ERROR:  table "session" is already distributed
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:59: ERROR:  grant/revoke on column list is currently unsupported
CREATE TABLE
 create_reference_table
------------------------

(1 row)

psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:74: ERROR:  table "logon" is already distributed
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:77: ERROR:  grant/revoke on column list is currently unsupported
CREATE FUNCTION
GRANT
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:117: NOTICE:  local tables that are added to metadata automatically by citus, but not chained with reference tables via foreign keys might be automatically converted back to postgres tables
HINT:  Executing citus_add_local_table_to_metadata($$pgaudit.log_event$$) prevents this for the given relation, and all of the connected relations
CREATE TABLE
 create_reference_table
------------------------

(1 row)

psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:122: ERROR:  table "log_event" is already distributed
GRANT
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:135: NOTICE:  local tables that are added to metadata automatically by citus, but not chained with reference tables via foreign keys might be automatically converted back to postgres tables
HINT:  Executing citus_add_local_table_to_metadata($$pgaudit.audit_statement$$) prevents this for the given relation, and all of the connected relations
CREATE TABLE
 create_distributed_table
--------------------------

(1 row)

psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:140: ERROR:  grant/revoke on column list is currently unsupported
CREATE TABLE
 create_distributed_table
--------------------------

(1 row)

GRANT
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:176: NOTICE:  local tables that are added to metadata automatically by citus, but not chained with reference tables via foreign keys might be automatically converted back to postgres tables
HINT:  Executing citus_add_local_table_to_metadata($$pgaudit.audit_substatement_detail$$) prevents this for the given relation, and all of the connected relations
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:176: NOTICE:  local tables that are added to metadata automatically by citus, but not chained with reference tables via foreign keys might be automatically converted back to postgres tables
HINT:  Executing citus_add_local_table_to_metadata($$pgaudit.audit_substatement_detail$$) prevents this for the given relation, and all of the connected relations
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:176: ERROR:  cannot create foreign key constraint since foreign keys from reference tables and local tables to distributed tables are not supported
DETAIL:  When adding a foreign key from a local table to a reference table, Citus applies a conversion to all the local tables in the foreign key graph
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:179: ERROR:  relation "pgaudit.audit_substatement_detail" does not exist
LINE 1: SELECT create_distributed_table('pgaudit.audit_substatement_...
                                        ^
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:181: ERROR:  relation "pgaudit.audit_substatement_detail" does not exist
psql:/opt/app/localhome/postgres/pgaudit_analyze-master/sql/audit.sql:209: ERROR:  relation "pgaudit.audit_substatement_detail" does not exist
LINE 18:     pgaudit.audit_substatement_detail
